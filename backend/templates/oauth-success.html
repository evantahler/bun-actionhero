<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="redirect-url" content="{{{redirectUrl}}}" />
    <title>Authorization Successful</title>
    <style>
      {{> commonCss}}
      .container { text-align: center; }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="checkmark">
        <svg viewBox="0 0 24 24">
          <polyline points="20 6 9 17 4 12"></polyline>
        </svg>
      </div>
      <h2>You're signed in!</h2>
      <p>Authorization was successful.</p>
      <p class="closing">You can close this window.</p>
    </div>
    <div class="dog">{{> dogSvg}}</div>
    <script>
      // Complete the OAuth flow by navigating to the callback URI
      // Use a hidden iframe so the page stays visible
      var iframe = document.createElement("iframe");
      iframe.style.display = "none";
      iframe.src = document.querySelector('meta[name="redirect-url"]').content;
      document.body.appendChild(iframe);
      // Try to close the window after giving the callback time to complete
      setTimeout(function () {
        window.close();
      }, 2000);
    </script>
  </body>
</html>
